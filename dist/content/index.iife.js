(function(){"use strict";const C="fie-impression-container",m="ql-editor",b=async()=>{var d,p,y,f,g,h,S,w;const n=document.querySelector("#algo-engage-root");if(!n)return;const t=n.closest("article"),e=n.closest("div#"+C),o=e==null?void 0:e.querySelector('button[aria-label="see more, visually reveals content which is already detected by screen readers"]');o&&(o.click(),await new Promise(a=>setTimeout(a,1200)),n.scrollIntoView({behavior:"smooth",block:"center"}));const r=((p=(d=e==null?void 0:e.querySelector('.update-components-actor__name span[aria-hidden="true"]'))==null?void 0:d.textContent)==null?void 0:p.trim())||"",c=((y=e==null?void 0:e.querySelector(".update-components-text"))==null?void 0:y.innerText.trim())||"";let i=(t==null?void 0:t.textContent)||null,s="",u="Replying to post";if(t){const a=((g=(f=t==null?void 0:t.querySelector("span.comments-post-meta__name-text"))==null?void 0:f.textContent)==null?void 0:g.trim())||"",l=((S=(h=t==null?void 0:t.querySelector(".comments-comment-item__main-content"))==null?void 0:h.textContent)==null?void 0:S.trim())||"";s+=`${a}:
 ${l}
`}return console.log("commentArticleHolder: ",t),((t==null?void 0:t.querySelectorAll(".comments-comment-item"))||[]).forEach(a=>{var q,x,_,T;const l=((x=(q=a.querySelector('.comments-post-meta__name-text span[aria-hidden="true"]'))==null?void 0:q.textContent)==null?void 0:x.trim())||"",E=((T=(_=a.querySelector(".comments-comment-item__main-content"))==null?void 0:_.textContent)==null?void 0:T.trim())||"";s+=`${l}:
 ${E}
`}),i&&(i=i.replace(/like(\n|\s){2,}reply/g,""),u="Replying to comment of '"+((w=e==null?void 0:e.querySelector(`.${m} a.ql-mention`))==null?void 0:w.textContent)+"'"),{postHeader:r,postContent:c,commentThread:s,replyingTo:u}};async function v(){var c,i;const n=document.querySelector("#algo-engage-root");if(!n)return;let t=n.closest("li.contribution");if(!t)return;let e=((c=t.querySelector("a span"))==null?void 0:c.textContent)||"",o=t.querySelector("div.contribution__text-wrapper");o&&o.querySelector("button")&&((i=o.querySelector("button"))==null||i.click(),await new Promise(s=>setTimeout(s,1200)),n.scrollIntoView({behavior:"smooth",block:"center"}));let r=o==null?void 0:o.textContent;return console.log({postContent:r,postHeader:e}),{postHeader:e,postContent:r,commentThread:null,replyingTo:"Replying to the post"}}async function k(){var r,c,i;const n=document.querySelector("#algo-engage-root");if(!n)return;let t=(r=n.closest("aside"))==null?void 0:r.previousElementSibling;if(!t)return;let e=((c=t.querySelector("h1.reader-article-header__title"))==null?void 0:c.textContent)||"",o=((i=t.querySelector("div.reader-article-content"))==null?void 0:i.textContent)||"";return console.log("article Selector"),console.log({postHeader:e,postContent:o}),{postHeader:e,postContent:o,commentThread:null,replyingTo:"Replying to article"}}async function D(n){var o;const t=document.querySelector("#algo-engage-root");if(!t)return;const e=(o=t.closest("form"))==null?void 0:o.querySelector(`div.${m} p`);if(e)if(n==="<clear>"){const r=e.lastChild;r&&r.nodeType===Node.TEXT_NODE&&e.removeChild(r),e.querySelector("a")&&(e.innerHTML+=" ")}else n==="<end>"||(e.innerHTML+=n)}async function R(n){var o,r;const t=document.querySelector("#algo-engage-root");if(!t)return;const e=(o=t.closest("div.contribution__reply-input-wrapper"))==null?void 0:o.querySelector("textarea");if(e)if(n==="<clear>")e.value="";else if(n==="<end>"){const c=(r=e.nextElementSibling)==null?void 0:r.querySelector("button[data-tracking-control-name='reply_post']");c.disabled=!1}else e.value+=n}chrome.runtime.onMessage.addListener((n,t,e)=>{n.action==="getDataForCommentGeneration"?window.location.href.includes("https://www.linkedin.com/advice")?v().then(o=>{chrome.runtime.sendMessage({action:"commentGenerationData",data:o})}):window.location.href.includes("https://www.linkedin.com/advice")||window.location.href.includes("https://www.linkedin.com/pulse")?k().then(o=>{chrome.runtime.sendMessage({action:"commentGenerationData",data:o})}):b().then(o=>{chrome.runtime.sendMessage({action:"commentGenerationData",data:o})}):n.action==="generatedCommentDelta"&&(window.location.href.includes("https://www.linkedin.com/advice")&&R(n.delta),D(n.delta))})})();
